## 자동완료 트랜잭션
- autocommit = 1 (기본값) 인 상태
- START TRANSACTION이나 COMMIT/ROLLBACK을 지정하지 않아도,
각 SQL 문장이 실행될 때마다 자동으로 트랜잭션이 시작 → 실행 → 즉시 COMMIT

## 수동완료 트랜잭션
- autocommit = 0 
- START TRANSACTION (또는 BEGIN) 으로 시작했을 때 활성화
- SQL 실행 결과가 즉시 DB에 반영되지 않고 “임시 상태”로 유지
- 사용자가 명시적으로 COMMIT 하면 최종 반영, ROLLBACK 하면 모두 취소

**데이터 무결성/안전성이 중요한 업무에서는 반드시 수동 트랜잭션이 필요**

### autocommit
- 현재 설정 상태 확인
```
select @@autocommit;
```

- 수동완료 모드 설정
```
set autocommit=0;
```

## COMMIT 과 ROLLBACK
- COMMIT : 지금까지의 변경사항을 최종적으로 DB에 반영
- ROLLBACK: 지금까지의 변경사항을 모두 취소하고, 트랜잭션 시작 시점의 상태로 되돌림.
- 예시코드
```
-- 트랜잭션 시작
START TRANSACTION;


-- 데이터 변경
UPDATE product SET stock = stock - 1 WHERE product_id = 101;


-- 변경 취소
ROLLBACK;


-- 다시 변경 후 저장
UPDATE product SET stock = stock - 1 WHERE product_id = 101;
COMMIT
```

## 다중 세션에서의 동작
- 서로 다른 세션(클라이언트)에서는 트랜잭션이 독립적으로 동작
- 한 세션에서 데이터를 변경하고 COMMIT을 하면 → 다른 세션에서 SELECT 시 변경된 값이 보임.
- 반대로 ROLLBACK을 하면 → 해당 세션에서만 취소되고, 다른 세션에는 아무 영향이 없다.
- 한쪽은 커밋 / 한쪽은 롤백일 때, 최종적으로는 커밋된 값이 다른 세션에서 보이게 된다.